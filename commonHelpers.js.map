{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\n// https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\nfunction base64ToBytes(base64) {\n  const binString = atob(base64);\n  return Uint8Array.from(binString, m => m.codePointAt(0));\n}\n\nconst API_KEY = new TextDecoder().decode(\n  base64ToBytes('NDQ3MzQwMDItYzM5MDBlYjc0MWM2MjEzYzdlYzI5NTNlMw==')\n);\n\nasync function searchImages(str) {\n  return (\n    await axios.get('/', {\n      params: {\n        key: API_KEY,\n        q: encodeURIComponent(str),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    })\n  ).data;\n}\n\nexport { searchImages };\n","function searchResultsMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\" />\n            <ul class=\"description\">\n              <li class=\"description-items\">\n                <span class=\"accent\">Likes </span>${likes}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"accent\">Views </span>${views}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"accent\">Comments </span>${comments}\n              </li>\n              <li class=\"description-items\">\n                <span class=\"accent\">Downloads </span>${downloads}\n              </li>\n            </ul>\n          </a>\n        </li>`\n    )\n    .join('');\n}\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n  element.classList.add('hidden');\n}\n\nexport { searchResultsMarkup, showElement, hideElement };\n","import { searchImages } from './js/pixabay-api';\nimport {\n  searchResultsMarkup,\n  showElement,\n  hideElement,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  form: document.querySelector('.js-search-form'),\n  input: document.querySelector('.js-search-input'),\n  gallery: document.querySelector('.js-gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\n  loader: document.querySelector('.js-loader'),\n};\n\nconst photosGallery = new simpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nelements.form.addEventListener('submit', searchHandler);\n\nasync function searchHandler(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n  const searchString = elements.input.value.trim();\n  if (searchString === '') {\n    return iziToast.error({\n      message: 'Search field can not be empty!',\n      position: 'topCenter',\n      timeout: 3000,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      iconUrl: './error.svg',\n      progressBarColor: '#b51b1b',\n      maxWidth: '432px',\n    });\n  }\n  showElement(elements.loader);\n\n  try {\n    const data = await searchImages(searchString);\n    if (data.hits.length === 0) {\n      elements.input.value = '';\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n        messageColor: '#fafafb',\n        backgroundColor: '#ef4040',\n        iconUrl: './error.svg',\n        progressBarColor: '#b51b1b',\n        maxWidth: '432px',\n      });\n    } else {\n      elements.input.value = '';\n      elements.gallery.innerHTML = searchResultsMarkup(data.hits);\n      photosGallery.refresh();\n    }\n  } catch (err) {\n    iziToast.error({\n      message: `Something went wrong... Error: ${err}`,\n      position: 'topCenter',\n      timeout: 3000,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      iconUrl: './error.svg',\n      progressBarColor: '#b51b1b',\n      maxWidth: '432px',\n    });\n  } finally {\n    hideElement(elements.loader);\n  }\n}\n"],"names":["axios","base64ToBytes","base64","binString","m","API_KEY","searchImages","str","searchResultsMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showElement","element","hideElement","elements","photosGallery","simpleLightbox","searchHandler","event","searchString","iziToast","data","err"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,0BAGzB,SAASC,EAAcC,EAAQ,CAC7B,MAAMC,EAAY,KAAKD,CAAM,EAC7B,OAAO,WAAW,KAAKC,EAAWC,GAAKA,EAAE,YAAY,CAAC,CAAC,CACzD,CAEA,MAAMC,EAAU,IAAI,YAAW,EAAG,OAChCJ,EAAc,kDAAkD,CAClE,EAEA,eAAeK,EAAaC,EAAK,CAC/B,OACE,MAAMP,EAAM,IAAI,IAAK,CACnB,OAAQ,CACN,IAAKK,EACL,EAAG,mBAAmBE,CAAG,EACzB,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACP,CAAK,GACD,IACJ,CC1BA,SAASC,EAAoBC,EAAO,CAClC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,0CAE8BL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,oDAGpBC,CAAK;AAAA;AAAA;AAAA,oDAGLC,CAAK;AAAA;AAAA;AAAA,uDAGFC,CAAQ;AAAA;AAAA;AAAA,wDAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,cAK5D,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,EAAYC,EAAS,CAC5BA,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEA,SAASC,EAAYD,EAAS,CAC5BA,EAAQ,UAAU,IAAI,QAAQ,CAChC,CC9BA,MAAME,EAAW,CACf,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,aAAa,EAC7C,YAAa,SAAS,cAAc,mBAAmB,EACvD,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEMC,EAAgB,IAAIC,EAAe,gBAAiB,CACxD,aAAc,MACd,aAAc,IACd,eAAgB,EAClB,CAAC,EAEDF,EAAS,KAAK,iBAAiB,SAAUG,CAAa,EAEtD,eAAeA,EAAcC,EAAO,CAClCA,EAAM,eAAc,EACpBJ,EAAS,QAAQ,UAAY,GAC7B,MAAMK,EAAeL,EAAS,MAAM,MAAM,KAAI,EAC9C,GAAIK,IAAiB,GACnB,OAAOC,EAAS,MAAM,CACpB,QAAS,iCACT,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UACjB,QAAS,cACT,iBAAkB,UAClB,SAAU,OAChB,CAAK,EAEHT,EAAYG,EAAS,MAAM,EAE3B,GAAI,CACF,MAAMO,EAAO,MAAMrB,EAAamB,CAAY,EACxCE,EAAK,KAAK,SAAW,GACvBP,EAAS,MAAM,MAAQ,GACvBM,EAAS,MAAM,CACb,QACE,2EACF,SAAU,WACV,QAAS,IACT,aAAc,UACd,gBAAiB,UACjB,QAAS,cACT,iBAAkB,UAClB,SAAU,OAClB,CAAO,IAEDN,EAAS,MAAM,MAAQ,GACvBA,EAAS,QAAQ,UAAYZ,EAAoBmB,EAAK,IAAI,EAC1DN,EAAc,QAAO,EAExB,OAAQO,EAAK,CACZF,EAAS,MAAM,CACb,QAAS,kCAAkCE,CAAG,GAC9C,SAAU,YACV,QAAS,IACT,aAAc,UACd,gBAAiB,UACjB,QAAS,cACT,iBAAkB,UAClB,SAAU,OAChB,CAAK,CACL,QAAY,CACRT,EAAYC,EAAS,MAAM,CAC5B,CACH"}